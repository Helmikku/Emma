if("undefined"==typeof Emma)var Emma={};Emma.Config={FACEBOOK_APP_ID:"1553833488197470",IMAGE:{HEIGHT:540,WIDTH:720}};
Emma.Core={LOADING:document.getElementById("loading"),MODULE:null,addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):("input"==b&&(b="change"),a.attachEvent("on"+b,c))},createElement:function(a,b,c,e,d,g){a=document.createElement(a);var f;if(null!==b)for(f=0;f<b.length;f++)a.setAttribute(b[f].name,b[f].value);if(null!==c)for(f=0;f<c.length;f++)a.appendChild(c[f]);e&&Emma.Core.addEvent(a,d,g);return a},emptyElement:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},formatDate:function(a){return(10>
a.getDate()?"0":"")+a.getDate()+"/"+(9>a.getMonth()?"0":"")+(a.getMonth()+1)+"/"+a.getFullYear()},formatNumber:function(a,b){a+="";if(a.length>b)return a.slice(a.length-b);for(;a.length<b;)a="0"+a;return a},h1:function(a){return Emma.Core.createElement("h1",[],[document.createTextNode(a)],!1)},h2:function(a){return Emma.Core.createElement("h2",[],[document.createTextNode(a)],!1)},html:function(a){var b=Emma.Core.createElement("div",[],[],!1);b.innerHTML=a;return b},p:function(a){return Emma.Core.createElement("p",
[],[document.createTextNode(a)],!1)},showArticle:function(a){null!==Emma.Core.MODULE&&Emma.Core.MODULE!==a&&(Emma.Core.MODULE.SECTION.style.display="none",Emma.Core.MODULE.TAB.className="tab");null!==a?(Emma.Core.MODULE=a,Emma.Core.MODULE.SUMMARY.style.display="none",Emma.Core.MODULE.ARTICLE.style.display="block",Emma.Core.MODULE.SECTION.style.display="block",Emma.Core.MODULE.TAB.className="active tab",document.getElementById("emma").style.background="#ffffff"):document.getElementById("emma").removeAttribute("style")},
showSection:function(a){null!==Emma.Core.MODULE&&Emma.Core.MODULE!==a&&(Emma.Core.MODULE.SECTION.style.display="none",Emma.Core.MODULE.TAB.className="tab");null!==a?(Emma.Core.MODULE=a,Emma.Core.MODULE.SUMMARY.style.display="block",Emma.Core.MODULE.ARTICLE.style.display="none",Emma.Core.MODULE.SECTION.style.display="block",Emma.Core.MODULE.TAB.className="active tab",document.getElementById("emma").style.background="#ffffff"):document.getElementById("emma").removeAttribute("style")}};
Emma.Exhibitions={LIST:[],SECTION:document.getElementById("exhibitions"),SUMMARY:document.getElementById("exhibitions_summary"),ARTICLE:document.getElementById("exhibitions_article"),TAB:document.getElementById("exhibitions_tab"),show:function(){Emma.Core.showSection(Emma.Exhibitions);Emma.History.push({section:"exhibitions"},"Exhibitions","/exhibitions")}};
Emma.Facebook={connect:function(){FB.getLoginStatus(function(a){"connected"==a.status?Emma.User.signIn():(FB.Event.subscribe("auth.statusChange",function(a){"connected"==a.status&&Emma.User.signIn()}),FB.login())})},init:function(){FB.init({appId:Emma.Config.FACEBOOK_APP_ID,cookie:!0,oauth:!0,status:!0,version:"v2.2",xfbml:!1})}};
Emma.History={URL:null,load:function(){var a=window.location.pathname.split("/");if("exhibitions"==a[1])Emma.Core.showSection(Emma.Exhibitions);else if("me"==a[1])Emma.Core.showSection(Emma.Me);else if("works"==a[1])if(2<a.length)if(0===Emma.Works.LIST.length)Emma.Works.init(a[2]);else for(var b=0;b<Emma.Works.LIST.length;b++){if(Emma.Works.LIST[b].id==a[2]){Emma.Core.emptyElement(Emma.Works.ARTICLE);Emma.Works.ARTICLE.appendChild(Emma.Works.LIST[b].article());Emma.Core.showArticle(Emma.Works);break}}else 0===
Emma.Works.LIST.length&&Emma.Works.init(),Emma.Core.showSection(Emma.Works);else Emma.Home.show()},push:function(a,b,c){Emma.History.URL!=c&&history.pushState&&(Emma.History.URL=c,history.pushState(a,b,c),ga("set","page",c),ga("send","pageview"))}};Emma.Home={show:function(){Emma.Core.showSection(null);Emma.History.push({section:"home"},"Home","/")}};
Emma.Me={SECTION:document.getElementById("me"),SUMMARY:document.getElementById("me_summary"),ARTICLE:document.getElementById("me_article"),TAB:document.getElementById("me_tab"),show:function(){Emma.Core.showSection(Emma.Me);Emma.History.push({section:"me"},"Me","/me")}};
Emma.User={me:function(){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var b=JSON.parse(a.responseText);b.success&&console.log("Bienvenue "+b.name);console.log(b);Emma.Core.LOADING.style.display="none"}else 4>a.readyState&&(Emma.Core.LOADING.style.display="block")};a.open("GET","/api/users/me",!0);a.send()},signIn:function(){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var b=JSON.parse(a.responseText);b.success?
Emma.User.me():console.log(b);Emma.Core.LOADING.style.display="none"}else 4>a.readyState&&(Emma.Core.LOADING.style.display="block")};a.open("GET","/api/users/signin",!0);a.send()},signOut:function(){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var b=JSON.parse(a.responseText);b.success&&console.log("\u00c0 bient\u00f4t !");console.log(b);Emma.Core.LOADING.style.display="none"}else 4>a.readyState&&(Emma.Core.LOADING.style.display="block")};a.open("GET",
"/api/users/signout",!0);a.send()}};
Emma.Works={LIST:[],SECTION:document.getElementById("works"),SUMMARY:document.getElementById("works_summary"),ARTICLE:document.getElementById("works_article"),TAB:document.getElementById("works_tab"),init:function(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){if(4==b.readyState&&200==b.status){var c=JSON.parse(b.responseText);if(c.success){Emma.Core.emptyElement(Emma.Works.SUMMARY);for(var e=0;e<c.works.length;e++){var d=new Work(c.works[e]);Emma.Works.LIST.push(d);Emma.Works.SUMMARY.appendChild(d.overview());
null!==a&&a==d.id&&(Emma.Works.ARTICLE.appendChild(d.article()),Emma.Core.showArticle(Emma.Works))}Emma.Works.SUMMARY.appendChild(Emma.Core.createElement("div",[{name:"class",value:"clear"}],[],!1))}else console.log(c);Emma.Core.LOADING.style.display="none"}else 4>b.readyState&&(Emma.Core.LOADING.style.display="block")};b.open("GET","/api/works/init",!0);b.send()},show:function(){0===Emma.Works.LIST.length&&Emma.Works.init();Emma.Core.showSection(Emma.Works);Emma.History.push({section:"works"},"Works",
"/works")}};
function Work(a){this.id=a.hasOwnProperty("id")?a.id:null;this.title=a.hasOwnProperty("title")?a.title:null;this.caption=a.hasOwnProperty("caption")?a.caption:null;this.description=a.hasOwnProperty("description")?a.description:null;this.thumbnails=a.hasOwnProperty("thumbnails")?a.thumbnails.split(","):[];this.images=a.hasOwnProperty("images")?a.images.split(","):[];this.date=a.hasOwnProperty("date")?a.date:null;this.collection_id=a.hasOwnProperty("collection_id")?a.collection_id:null}
Work.prototype.article=function(){return Emma.Core.createElement("div",[{name:"class",value:"work"}],[Emma.Core.createElement("div",[{name:"class",value:"caption clear"}],[Emma.Core.h1(this.title),Emma.Core.html(this.caption)],!1),this.slider(),Emma.Core.createElement("div",[{name:"class",value:"description clear"}],[Emma.Core.html(this.description)],!1)],!1)};
Work.prototype.overview=function(){var a=this;return Emma.Core.createElement("div",[{name:"class",value:"work"}],[Emma.Core.createElement("img",[{name:"class",value:"thumbnail"},{name:"src",value:"/images/"+this.thumbnails[0]},{name:"title",value:this.title}],[],!1),Emma.Core.createElement("div",[{name:"class",value:"caption"}],[Emma.Core.h2(this.title),Emma.Core.html(this.caption)],!1)],!0,"click",function(){a.show()})};
Work.prototype.show=function(){Emma.History.push({section:"works",id:this.id},this.title,"/works/"+this.id);Emma.Core.emptyElement(Emma.Works.ARTICLE);Emma.Works.ARTICLE.appendChild(this.article());Emma.Core.showArticle(Emma.Works)};
Work.prototype.slider=function(){for(var a=this,b=[Emma.Core.createElement("div",[{name:"class",value:"files"},{name:"style",value:"top: 0px; height: "+this.images.length*Emma.Config.IMAGE.HEIGHT+"px;"}],[],!1)],c=[],e=0;e<this.thumbnails.length;e++)(function(d){b[0].appendChild(Emma.Core.createElement("div",[{name:"class",value:"image n"+d}],[Emma.Core.createElement("img",[{name:"src",value:"/images/"+a.images[d]}],[],!1)],!1));c.push(Emma.Core.createElement("div",[{name:"class",value:"thumbnail n"+
d}],[Emma.Core.createElement("img",[{name:"src",value:"/images/"+a.thumbnails[d]},{name:"title",value:d+1}],[],!1),Emma.Core.createElement("div",[{name:"class",value:"shadow"}],[],!1)],!0,"click",function(){b[0].style.top=-d*Emma.Config.IMAGE.HEIGHT+"px";b[0].parentNode.className=0===d?"images start":d==a.thumbnails.length-1?"images end":"images"}))})(e);1<this.thumbnails.length&&(b.push(Emma.Core.createElement("div",[{name:"class",value:"next button"}],[Emma.Core.createElement("div",[],[],!0,"click",
function(){var d=b[0].offsetTop-Emma.Config.IMAGE.HEIGHT;b[0].style.top=Math.max(-(a.thumbnails.length-1)*Emma.Config.IMAGE.HEIGHT,d)+"px";b[0].parentNode.className=d==-(a.thumbnails.length-1)*Emma.Config.IMAGE.HEIGHT?"images end":"images"})],!1)),b.push(Emma.Core.createElement("div",[{name:"class",value:"previous button"}],[Emma.Core.createElement("div",[],[],!0,"click",function(){var a=b[0].offsetTop+Emma.Config.IMAGE.HEIGHT;b[0].style.top=Math.min(0,a)+"px";b[0].parentNode.className=0===a?"images start":
"images"})],!1)));return Emma.Core.createElement("div",[{name:"class",value:"slider"}],[Emma.Core.createElement("div",[{name:"class",value:"images start"}],b,!1),Emma.Core.createElement("div",[{name:"class",value:"thumbnails"}],c,!1)],!1)};